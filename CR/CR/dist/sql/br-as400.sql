--  Generar SQL 
--  Versión:                   	V5R4M0 060210 
--  Generado en:              	10/12/10 12:58:19 
--  Base de datos relacional:       	S10E906D 
--  Opción de estándares:          	DB2 UDB iSeries 
  
CREATE TABLE CR.BR_COMPROBANTEFISCAL ( 
	NUMTIENDA SMALLINT NOT NULL DEFAULT 0 , 
	FECHA DATE NOT NULL , 
	NUMCAJA SMALLINT NOT NULL DEFAULT 0 , 
	NUMTRANSACCION FOR COLUMN NUMTR00001 INTEGER NOT NULL DEFAULT 0 , 
	NUMCOMPROBANTEFISCAL FOR COLUMN NUMCO00001 INTEGER NOT NULL DEFAULT 0 , 
	FECHAEMISION FOR COLUMN FECHA00001 DATE NOT NULL , 
	TIPOCOMPROBANTE FOR COLUMN TIPOC00001 CHAR(1) CCSID 284 NOT NULL DEFAULT '' , 
	SERIALCAJA VARCHAR(20) ALLOCATE(3) CCSID 284 NOT NULL DEFAULT 'S/N' , 
	REGACTUALIZADO FOR COLUMN REGAC00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'N' , 
	CONSTRAINT CR.Q_CR_BR_CO00002_NUMTIENDA_00001 PRIMARY KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION , NUMCOMPROBANTEFISCAL , TIPOCOMPROBANTE ) )   
	; 
  
ALTER TABLE CR.BR_COMPROBANTEFISCAL 
	ADD CONSTRAINT CR.Q_CR_BR_CO00002_NUMTIENDA_00002 
	FOREIGN KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	REFERENCES CR.BR_TRANSACCION ( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ; 
  
LABEL ON TABLE CR.BR_COMPROBANTEFISCAL 
	IS 'Tabla datos comprobantes fiscales emitidos BR' ; 
  
CREATE TABLE CR.BR_CONDICIONES ( 
	ORDEN SMALLINT NOT NULL DEFAULT 0 , 
	LINEACONDICION FOR COLUMN LINEA00001 VARCHAR(40) CCSID 284 NOT NULL DEFAULT '' , 
	HABILITADO CHAR(1) CCSID 284 NOT NULL DEFAULT 'S' , 
	CONSTRAINT CR.Q_CR_BR_CO00001_ORDEN_00001 PRIMARY KEY( ORDEN ) )   
	; 
  
LABEL ON TABLE CR.BR_CONDICIONES 
	IS 'Tabla con las condiciones del servicio de BR' ; 
  
CREATE TABLE CR.BR_DETALLETRANSACCION ( 
	NUMTIENDA SMALLINT NOT NULL DEFAULT 0 , 
	FECHA DATE NOT NULL , 
	NUMCAJA SMALLINT NOT NULL DEFAULT 0 , 
	CODTARJETA FOR COLUMN CODTA00001 VARCHAR(18) CCSID 284 DEFAULT NULL , 
	CORRELATIVOITEM FOR COLUMN CORRE00001 SMALLINT NOT NULL DEFAULT 0 , 
	NUMTRANSACCION FOR COLUMN NUMTR00001 INTEGER DEFAULT NULL , 
	MONTOBASE FOR COLUMN MONTO00001 DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	MONTOIMPUESTO FOR COLUMN MONTO00002 DECIMAL(16, 5) NOT NULL DEFAULT 0 , 
	REGACTUALIZADO FOR COLUMN REGAC00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'N' , 
	ESTADOREGISTRO FOR COLUMN ESTAD00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'A' , 
	CODUSUARIOANULA FOR COLUMN CODUS00001 VARCHAR(10) CCSID 284 DEFAULT NULL , 
	NUMSEQ INTEGER NOT NULL DEFAULT 0 )   
	; 
  
ALTER TABLE CR.BR_DETALLETRANSACCION 
	ADD CONSTRAINT CR.Q_CR_BR_DE00001_NUMTIENDA_00002 
	UNIQUE( NUMTIENDA , FECHA , NUMCAJA , CORRELATIVOITEM , NUMTRANSACCION ) ; 
  
ALTER TABLE CR.BR_DETALLETRANSACCION 
	ADD CONSTRAINT CR.Q_CR_BR_DE00001_NUMTIENDA_00001 
	FOREIGN KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	REFERENCES CR.BR_TRANSACCION ( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ; 
  
LABEL ON TABLE CR.BR_DETALLETRANSACCION 
	IS 'Tabla con detalles de trx bonos regalo efectuadas' ; 
  
LABEL ON COLUMN CR.BR_DETALLETRANSACCION 
( CODUSUARIOANULA TEXT IS 'Usuario AS400 que anula la Tjta' ) ; 
  
CREATE TABLE CR.BR_OPCIONHABILITADA ( 
	CODMETODO SMALLINT NOT NULL DEFAULT 0 , 
	NOMBREOPCION FOR COLUMN NOMBR00001 VARCHAR(30) CCSID 284 NOT NULL DEFAULT '' , 
	RUTAIMAGEN VARCHAR(255) CCSID 284 NOT NULL DEFAULT '' , 
	TECLA CHAR(1) CCSID 284 NOT NULL DEFAULT '' , 
	ORDEN SMALLINT NOT NULL DEFAULT 0 , 
	HABILITADO CHAR(1) CCSID 284 NOT NULL DEFAULT 'S' , 
	CONSTRAINT CR.Q_CR_BR_OP00001_CODMETODO_00001 PRIMARY KEY( CODMETODO , NOMBREOPCION ) )   
	; 
  
ALTER TABLE CR.BR_OPCIONHABILITADA 
	ADD CONSTRAINT CR.Q_CR_BR_OP00001_CODMETODO_00002 
	FOREIGN KEY( CODMETODO ) 
	REFERENCES CR.METODOS ( CODMETODO ) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ; 
  
LABEL ON TABLE CR.BR_OPCIONHABILITADA 
	IS 'Opciones disponlibles para modulos vposUniversal' ; 
  
LABEL ON COLUMN CR.BR_OPCIONHABILITADA 
( HABILITADO TEXT IS 'Indica si el registro se encuentra activo' ) ; 
  
CREATE TABLE CR.BR_PAGODETRANSACCION ( 
	NUMTIENDA SMALLINT NOT NULL DEFAULT 0 , 
	FECHA DATE NOT NULL , 
	NUMCAJA SMALLINT NOT NULL DEFAULT 0 , 
	NUMTRANSACCION FOR COLUMN NUMTR00001 INTEGER NOT NULL DEFAULT 0 , 
	CODFORMADEPAGO FOR COLUMN CODFO00001 VARCHAR(10) CCSID 284 NOT NULL DEFAULT '' , 
	CORRELATIVOITEM FOR COLUMN CORRE00001 SMALLINT NOT NULL DEFAULT 0 , 
	MONTO DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	NUMDOCUMENTO FOR COLUMN NUMDO00001 VARCHAR(10) CCSID 284 DEFAULT NULL , 
	NUMCUENTA VARCHAR(20) CCSID 284 DEFAULT NULL , 
	NUMCONFORMACION FOR COLUMN NUMCO00001 VARCHAR(11) CCSID 284 DEFAULT NULL , 
	NUMREFERENCIA FOR COLUMN NUMRE00001 INTEGER DEFAULT NULL , 
	CEDTITULAR VARCHAR(12) CCSID 284 DEFAULT NULL , 
	CODBANCO CHAR(3) CCSID 284 DEFAULT NULL , 
	REGACTUALIZADO FOR COLUMN REGAC00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'N' , 
	CODAUTORIZANTE FOR COLUMN CODAU00001 VARCHAR(8) CCSID 284 DEFAULT NULL , 
	CONSTRAINT CR.Q_CR_BR_PAGOD00002_NUMTIENDA_00001 PRIMARY KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION , CODFORMADEPAGO , CORRELATIVOITEM ) )   
	; 
  
ALTER TABLE CR.BR_PAGODETRANSACCION 
	ADD CONSTRAINT CR.Q_CR_BR_PA00001_CODFO00001_00001 
	FOREIGN KEY( CODFORMADEPAGO ) 
	REFERENCES CR.FORMADEPAGO ( CODFORMADEPAGO ) 
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ; 
  
ALTER TABLE CR.BR_PAGODETRANSACCION 
	ADD CONSTRAINT CR.Q_CR_BR_PA00001_NUMTIENDA_00001 
	FOREIGN KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	REFERENCES CR.BR_TRANSACCION ( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) 
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ; 
  
LABEL ON TABLE CR.BR_PAGODETRANSACCION 
	IS 'Detalle pagos efectuados ventas de bonos regalo' ; 
  
CREATE TABLE CR.BR_TARJETABLOQUEADA ( 
	NUMTIENDA SMALLINT NOT NULL DEFAULT 0 , 
	FECHA DATE NOT NULL , 
	NUMCAJA SMALLINT NOT NULL DEFAULT 0 , 
	CODTARJETA FOR COLUMN CODTA00001 VARCHAR(18) CCSID 284 NOT NULL DEFAULT '' , 
	CORRELATIVOITEM FOR COLUMN CORRE00001 SMALLINT NOT NULL DEFAULT 0 , 
	MONTO_TOTAL FOR COLUMN MONTO00001 DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	CONSTRAINT CR.Q_CR_BR_DETAL00004_NUMTIENDA_00001 PRIMARY KEY( NUMTIENDA , FECHA , NUMCAJA , CORRELATIVOITEM ) )   
	; 
  
LABEL ON TABLE CR.BR_TARJETABLOQUEADA 
	IS 'Tabla con detalles de trx bonos regalo Bloqueadas' ; 
  
CREATE TABLE CR.BR_TRANSACCION ( 
	NUMTIENDA SMALLINT NOT NULL DEFAULT 0 , 
	FECHA DATE NOT NULL , 
	NUMCAJA SMALLINT DEFAULT NULL , 
	NUMTRANSACCION FOR COLUMN NUMTR00001 INTEGER DEFAULT NULL , 
	TIPOTRANSACCION FOR COLUMN TIPOT00001 CHAR(1) CCSID 284 NOT NULL DEFAULT '' , 
	HORAINICIA TIME NOT NULL , 
	HORAFINALIZA FOR COLUMN HORAF00001 TIME NOT NULL , 
	CODCLIENTE VARCHAR(12) CCSID 284 DEFAULT NULL , 
	CODCAJERO VARCHAR(8) CCSID 284 NOT NULL DEFAULT '' , 
	MONTOBASE DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	MONTOIMPUESTO FOR COLUMN MONTO00001 DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	VUELTOCLIENTE FOR COLUMN VUELT00001 DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	MONTOREMANENTE FOR COLUMN MONTO00002 DECIMAL(13, 2) NOT NULL DEFAULT 0 , 
	LINEASFACTURACION FOR COLUMN LINEA00001 SMALLINT NOT NULL DEFAULT 0 , 
	CAJAENLINEA FOR COLUMN CAJAE00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'S' , 
	DURACIONVENTA FOR COLUMN DURAC00001 SMALLINT NOT NULL DEFAULT 0 , 
	DURACIONPAGO FOR COLUMN DURAC00002 SMALLINT NOT NULL DEFAULT 0 , 
	ESTADOTRANSACCION FOR COLUMN ESTAD00001 CHAR(1) CCSID 284 NOT NULL DEFAULT '' , 
	REGACTUALIZADO FOR COLUMN REGAC00001 CHAR(1) CCSID 284 NOT NULL DEFAULT 'N' , 
	CODAUTORIZANTE FOR COLUMN CODAU00001 VARCHAR(8) CCSID 284 DEFAULT NULL , 
	CODVENDEDOR FOR COLUMN CODVE00001 VARCHAR(8) CCSID 284 DEFAULT NULL , 
	INVENTARIO CHAR(1) CCSID 284 NOT NULL DEFAULT 'N' , 
	FECHAANULACION FOR COLUMN FECHA00001 DATE DEFAULT NULL , 
	CONSTRAINT CR.Q_CR_BR_TRANS00001_NUMTIENDA_00001 PRIMARY KEY( NUMTIENDA , FECHA , NUMCAJA , NUMTRANSACCION ) )   
	; 
  
LABEL ON TABLE CR.BR_TRANSACCION 
	IS 'Cabecera transaciones de bonos regalo efectuadas' ; 
  
LABEL ON COLUMN CR.BR_TRANSACCION 
( CODVENDEDOR TEXT IS 'Codigo de Vendedor Ventas Corporativas' ) ;